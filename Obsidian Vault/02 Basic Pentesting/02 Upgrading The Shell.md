So we've made a reverse shell. But now we have to make it operational as it is a just a raw connection at the moment. So how do we accomplish this? 

## 1. What kind of python do you have?
Your system is going to be running some kind of programming language as a means of operations. Generally these days. Python is the most popular. So let's check the version with the [[Basic command]] <span style="color:#00b050">python -V </span>or <span style="color:#00b050">python3 -V</span> commands
![[Pasted image 20231210190817.png]]

## 2. Create your improved shell.
First we use the  [[Shell Upgrade Command]] <span style="color:#00b050">python3 -c 'import pty; pty.spawn("/bin/bash")'</span> is your next command (take the 3 off of python if you are using python 3 or less)

Then we use the [[Shell Upgrade Command]] <span style="color:#00b050">SHELL=/bin/bash script -q /dev/null</span>, this is an alternative for systems that don't have Python installed. But using it as an addition also aims to upgrade a basic shell to a more interactive one. Here's a breakdown:
![[Pasted image 20231210192225.png]]

## 3. Configure your upgraded shell.
a common technique used to background a shell that is running in the foreground and then bring it back to the foreground with improved interactivity. First you will need to background the shell with <span style="color:#00b050">Ctrl + Z.</span>  And then you'll want to use the [[Shell Upgrade Command]] <span style="color:#00b050">stty raw -echo; fg</span> which will modify your terminal settings and then bring the shell back to the foreground. 

After this you'll want to reset the terminal with the command reset. 
![[Pasted image 20231210193637.png]]

## 4. What kind of Terminal do you want?

Sometimes the computer asks you what type of TERM you want to use. When the terminal prompts for the "TERM" to use, it asks you to specify the type of terminal emulation you want to use. The "TERM" environment variable defines the type of terminal that your shell session should emulate. There are many types, but we’ll use xterm:

The [[Shell Upgrade Command]] <span style="color:#00b050">echo $TERM</span> command is used to display the current value of the TERM environment variable in your terminal. The <span style="color:#00b050">export TERM=xterm-256color</span> command sets the TERM variable to "xterm-256color." Finally, <span style="color:#00b050">echo $TERM</span> is used again to confirm the updated value. After this step you should be able to clear your terminal.
![[Pasted image 20231210194459.png]]
## Step 5. Validate your new shell:
Next we are going to want to see what kind of shell we have and upgrade if necessary. 

The [[Shell Upgrade Command]] <span style="color:#00b050">echo $SHELL</span> is used to display the current shell that is running in your terminal. The <span style="color:#00b050">export SHELL=/bin/bash</span> command sets the SHELL environment variable to "/bin/bash." Finally, <span style="color:#00b050">echo $SHELL</span> is used again to confirm the updated value.
![[Pasted image 20231210194627.png]]
## 6. Gather the info about your machine (attacker) and your target’s machine (victim):

These commands are used to gather information about the terminal environment on both the attacker (the machine where you're running these commands) and the victim (the machine you're attacking). 

**Attacker's Machine:**
For your machine you're going to want to see what kind of rows and columns your terminal is setup to handle. Use the [[Shell Upgrade Command]]<span style="color:#00b050"> tput lines && tput cols</span> and you should see an output like this (rows and then columns respectfully):
![[Pasted image 20231210195229.png]]

**Victim's Machine:**
Now that you know your host machine settings, you're going to want your victim's terminal to match so use the [[Shell Upgrade Command]] <span style="color:#00b050">stty rows {first number} cols {second number}</span>
![[Pasted image 20231210195432.png]]

And that's it! You've upgraded you shell. For a quick guide just go to the [[Shell Upgrade Command]] fold and run the commands (and red notes) in order and you'll be done in no time. 